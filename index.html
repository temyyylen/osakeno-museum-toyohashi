<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãŠé…’ã®ç¾è¡“é¤¨ è±Šæ©‹é§…å‰åº— | MENU</title>
<link rel="icon" href="icon.png" type="image/png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300&family=Noto+Sans+JP:wght@200;300;400;500;600&family=Noto+Serif+JP:wght@200;300;400;500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#faf9f7;--bg-warm:#fff;--bg-card:#fff;--gold:#8a7345;--gold-dim:#c9a96e;--text:#1a1815;--text-mid:#4a4540;--text-dim:#7a756e;--text-muted:#a09a90;--border:#e8e4de;--border-light:#f0ece6;--shadow-md:0 4px 16px rgba(0,0,0,.06);--shadow-lg:0 8px 30px rgba(0,0,0,.08);--pad:2rem}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Noto Sans JP',sans-serif;font-weight:300;line-height:1.7;-webkit-font-smoothing:antialiased;overflow-x:hidden}
::-webkit-scrollbar{width:5px;height:4px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
.site-header{position:fixed;top:0;left:0;right:0;z-index:100;background:rgba(250,249,247,.92);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.header-inner{max-width:1400px;margin:0 auto;padding:.65rem var(--pad);display:flex;align-items:center;justify-content:space-between}
.logo-area{display:flex;align-items:center;gap:.8rem}
.logo-img{height:30px;width:auto}
.logo-text{font-family:'Noto Serif JP',serif;font-weight:400;font-size:.82rem;letter-spacing:.12em}
.logo-sub{font-size:.58rem;color:var(--text-dim);letter-spacing:.15em;font-weight:300}
.header-nav{display:flex;gap:2rem}
.header-nav a{color:var(--text-dim);text-decoration:none;font-size:.62rem;letter-spacing:.2em;text-transform:uppercase;transition:color .3s;font-weight:400}
.header-nav a:hover{color:var(--gold)}
.hero{min-height:88vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:5rem var(--pad) 3.5rem;position:relative;background:linear-gradient(180deg,#f0ece4,var(--bg))}
.hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 50% 50% at 50% 45%,rgba(201,169,110,.07),transparent 70%);pointer-events:none}
.hero-logo{width:200px;height:auto;margin-bottom:1.2rem;opacity:0;animation:fadeUp .8s ease .2s forwards}
.hero h1{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:clamp(2rem,5vw,3.8rem);letter-spacing:.1em;margin-bottom:.2rem;opacity:0;animation:fadeUp .8s ease .35s forwards}
.hero-jp{font-family:'Noto Serif JP',serif;font-weight:300;font-size:clamp(.75rem,1.4vw,.95rem);letter-spacing:.3em;color:var(--text-dim);margin-bottom:1.8rem;opacity:0;animation:fadeUp .8s ease .5s forwards}
.hero-line{width:45px;height:1px;background:var(--gold-dim);margin:0 auto 1.8rem;opacity:0;animation:fadeUp .8s ease .6s forwards}
.hero-stats{display:flex;gap:3rem;opacity:0;animation:fadeUp .8s ease .75s forwards}
.hero-stat-num{font-family:'Cormorant Garamond',serif;font-size:2rem;font-weight:400;color:var(--gold);line-height:1}
.hero-stat-label{font-size:.55rem;letter-spacing:.2em;color:var(--text-muted);margin-top:.25rem}
.scroll-indicator{position:absolute;bottom:1.8rem;left:0;right:0;display:flex;flex-direction:column;align-items:center;gap:.4rem;opacity:0;animation:fadeUp .8s ease 1s forwards}
.scroll-indicator span{font-size:.5rem;letter-spacing:.3em;color:var(--text-muted)}
.scroll-line{width:1px;height:30px;background:linear-gradient(to bottom,var(--gold-dim),transparent);animation:scrollPulse 2s ease infinite}
@keyframes scrollPulse{0%,100%{opacity:.3;transform:scaleY(.6)}50%{opacity:1;transform:scaleY(1)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
.section-header{padding:3rem var(--pad) 1.2rem;max-width:1400px;margin:0 auto}
.section-label{font-size:.52rem;letter-spacing:.4em;color:var(--gold-dim);text-transform:uppercase;margin-bottom:.2rem}
.section-title{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:clamp(1.5rem,3vw,2.2rem);letter-spacing:.05em}
.h-track{display:flex;gap:1px;overflow-x:auto;scroll-snap-type:x mandatory;scrollbar-width:none;padding-left:var(--pad);padding-right:var(--pad);scroll-padding-left:var(--pad);padding-top:6px;margin-top:-6px;}
.h-track::-webkit-scrollbar{display:none}
.recommend-track{gap:1rem}
.recommend-card{flex:0 0 240px;scroll-snap-align:start;background:var(--bg-card);border:1px solid var(--border);overflow:hidden;transition:all .3s ease}
.recommend-card:hover{border-color:var(--gold-dim);box-shadow:var(--shadow-lg);transform:translateY(-2px)}
.card-image{width:100%;aspect-ratio:3/4;background:var(--bg-warm);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}
.card-image img{width:100%;height:100%;object-fit:contain;padding:1.2rem;transition:transform .4s}
.recommend-card:hover .card-image img{transform:scale(1.03)}
.card-image .ph{font-family:'Cormorant Garamond',serif;font-size:2.2rem;color:var(--border);font-weight:300}
.card-badge{position:absolute;top:.6rem;left:.6rem;background:var(--text);color:#fff;font-size:.48rem;font-weight:500;letter-spacing:.15em;padding:.18rem .45rem}
.card-info{padding:.9rem 1rem 1.1rem}
.card-cat{font-size:.5rem;letter-spacing:.18em;color:var(--text-muted);text-transform:uppercase;margin-bottom:.2rem}
.card-name1{font-family:'Noto Serif JP',serif;font-weight:400;font-size:.75rem;line-height:1.45}
.card-name2{font-family:'Noto Serif JP',serif;font-weight:300;font-size:.75rem;color:var(--text-dim);margin-top:.1rem;min-height:1em}
.card-price{font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:500;color:var(--gold);margin-top:.4rem}
.card-price small{font-size:.5rem;color:var(--text-muted);font-family:'Noto Sans JP',sans-serif;font-weight:300;margin-left:.2rem}
.scroll-arrows{display:flex;gap:.35rem;padding:.6rem var(--pad) 1.5rem;justify-content:flex-end;max-width:1400px;margin:0 auto}
.scroll-arrow{width:34px;height:34px;border:1px solid var(--border);background:var(--bg-card);color:var(--text-dim);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s}
.scroll-arrow:hover{border-color:var(--gold-dim);color:var(--gold)}
.menu-section{padding:.5rem 0 3rem}
.main-tabs{max-width:1400px;margin:0 auto;padding:0 var(--pad) .6rem;display:flex;border-bottom:1px solid var(--border);overflow-x:auto;scrollbar-width:none}
.main-tabs::-webkit-scrollbar{display:none}
.main-tab{background:none;border:none;font-family:'Noto Sans JP',sans-serif;font-size:.75rem;font-weight:400;color:var(--text-dim);padding:.6rem 1.2rem;cursor:pointer;position:relative;transition:color .3s;letter-spacing:.05em;white-space:nowrap}
.main-tab:hover{color:var(--text)}
.main-tab.active{color:var(--text);font-weight:500}
.main-tab.active::after{content:'';position:absolute;bottom:-1px;left:0;right:0;height:2px;background:var(--gold)}
.sub-wrap{max-width:1400px;margin:0 auto;padding:.7rem var(--pad) 0;overflow-x:auto;scrollbar-width:none}
.sub-wrap::-webkit-scrollbar{display:none}
.sub-tabs{display:flex;gap:.35rem;min-width:max-content}
.sub-tab{background:transparent;border:1px solid var(--border);color:var(--text-dim);font-family:'Noto Sans JP',sans-serif;font-size:.65rem;font-weight:300;padding:.25rem .7rem;cursor:pointer;transition:all .25s;white-space:nowrap}
.sub-tab:hover{border-color:var(--gold-dim);color:var(--text-mid)}
.sub-tab.active{background:var(--text);border-color:var(--text);color:#fff;font-weight:400}
.cat-row{max-width:1400px;margin:0 auto;padding:1.2rem 0 .3rem}
.cat-row-hd{padding:0 var(--pad);display:flex;align-items:baseline;gap:.7rem;margin-bottom:.6rem}
.cat-row-hd h3{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:1.15rem;letter-spacing:.03em}
.cat-row-hd .cc{font-size:.55rem;color:var(--text-muted);letter-spacing:.1em}
.cat-row-hd .cl{flex:1;height:1px;background:var(--border)}
.mi{flex:0 0 170px;scroll-snap-align:start;background:var(--bg-card);border:1px solid var(--border-light);padding:.7rem;display:flex;flex-direction:column;transition:all .3s;cursor:default;position:relative}
.mi:hover{border-color:var(--gold-dim);box-shadow:var(--shadow-md);z-index:2}
.mi-img{width:100%;aspect-ratio:1/1.12;background:var(--bg-warm);margin-bottom:.5rem;display:flex;align-items:center;justify-content:center;overflow:hidden}
.mi-img img{width:100%;height:100%;object-fit:contain;padding:.4rem;transition:transform .4s}
.mi:hover .mi-img img{transform:scale(1.03)}
.mi-img .phs{font-size:1.3rem;color:var(--border);opacity:.5}
.mi-cat{font-size:.48rem;letter-spacing:.18em;color:var(--text-muted);text-transform:uppercase;margin-bottom:.15rem}
.mi-name1{font-family:'Noto Serif JP',serif;font-weight:400;font-size:.7rem;line-height:1.4}
.mi-name2{font-family:'Noto Serif JP',serif;font-weight:300;font-size:.7rem;color:var(--text-dim);line-height:1.3;margin-top:.1rem;min-height:.8em}
.mi-names{flex-grow:1;margin-bottom:.35rem}
.mi-price{font-family:'Cormorant Garamond',serif;font-size:1.05rem;font-weight:500;color:var(--gold)}

.store-section{margin-top:2.5rem;border-top:1px solid var(--border);background:var(--bg-warm);padding:3.5rem var(--pad)}
.store-inner{max-width:1050px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:2.5rem}
.store-info-area h2{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:1.5rem;letter-spacing:.05em;margin-bottom:.15rem}
.store-name-jp{font-family:'Noto Serif JP',serif;font-weight:300;font-size:.85rem;color:var(--text-mid);letter-spacing:.12em;margin-bottom:1.6rem}
.sd{display:flex;gap:.7rem;margin-bottom:.9rem;align-items:flex-start}
.si{flex-shrink:0;width:14px;color:var(--gold-dim);margin-top:.1rem}
.sd-label{font-size:.52rem;letter-spacing:.18em;color:var(--text-muted);text-transform:uppercase;margin-bottom:.1rem}
.sd-val{font-size:.8rem;color:var(--text-mid);font-weight:300}
.sd-val a{color:var(--gold);text-decoration:none;transition:color .3s}
.sd-val a:hover{color:var(--text)}
.store-map{overflow:hidden;border:1px solid var(--border);background:#fff}
.store-map iframe{width:100%;height:100%;min-height:300px;border:none}
.footer-bottom{max-width:1050px;margin:2rem auto 0;padding-top:1.2rem;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.footer-copy{font-size:.52rem;color:var(--text-muted);letter-spacing:.1em}
.footer-link a{color:var(--text-dim);text-decoration:none;font-size:.58rem;letter-spacing:.1em;transition:color .3s}
.footer-link a:hover{color:var(--gold)}
.loader{position:fixed;inset:0;background:var(--bg);z-index:1000;display:flex;align-items:center;justify-content:center;transition:opacity .5s}
.loader.hidden{opacity:0;pointer-events:none}
.loader span{font-family:'Cormorant Garamond',serif;font-size:1rem;color:var(--gold-dim);letter-spacing:.3em;animation:pulse 1.5s ease infinite}
@keyframes pulse{0%,100%{opacity:.3}50%{opacity:1}}
.btt{position:fixed;bottom:1.2rem;right:1.2rem;width:38px;height:38px;background:rgba(255,255,255,.92);border:1px solid var(--border);color:var(--text-dim);display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:0;transform:translateY(8px);transition:all .3s;z-index:50;backdrop-filter:blur(10px)}
.btt.visible{opacity:1;transform:translateY(0)}
.btt:hover{border-color:var(--gold-dim);color:var(--gold)}
.no-res{padding:3rem var(--pad);text-align:center;color:var(--text-muted);font-size:.8rem;max-width:1400px;margin:0 auto}
@media(max-width:768px){
:root{--pad:1.2rem}
.header-nav{display:none}.header-inner{padding:.55rem var(--pad)}
.hero{padding:4.5rem var(--pad) 2.5rem;min-height:78vh}.hero-stats{gap:1.8rem}
.section-header{padding:2.2rem var(--pad) .8rem}
.recommend-card{flex:0 0 200px}
.main-tab{padding:.5rem .8rem;font-size:.7rem}
.mi{flex:0 0 148px;padding:.6rem}
.store-inner{grid-template-columns:1fr}
.footer-bottom{flex-direction:column;gap:.6rem;text-align:center}
}
</style>
</head>
<body>
<div class="loader" id="loader"><span>LIQUOR MUSEUM</span></div>
<header class="site-header"><div class="header-inner">
<a href="#top" class="logo-area" style="text-decoration:none;color:inherit">
<img src="icon.png" alt="ãŠé…’ã®ç¾è¡“é¤¨" class="logo-img" onerror="this.style.display='none'">
<div><div class="logo-text">ãŠé…’ã®ç¾è¡“é¤¨</div><div class="logo-sub">è±Šæ©‹é§…å‰åº—</div></div>
</a>
<nav class="header-nav"><a href="#recommend">ãŠã™ã™ã‚</a><a href="#menu">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</a><a href="#access">ã‚¢ã‚¯ã‚»ã‚¹</a></nav>
</div></header>

<section class="hero" id="top">
<img src="logo.png" alt="" class="hero-logo" onerror="this.style.display='none'">
<h1>LIQUOR MUSEUM</h1>
<p class="hero-jp">ãŠé…’ã®ç¾è¡“é¤¨ã€€è±Šæ©‹é§…å‰åº—</p>
<div class="hero-line"></div>
<div class="hero-stats">
<div><div class="hero-stat-num" id="tc">&mdash;</div><div class="hero-stat-label">BOTTLES</div></div>
<div><div class="hero-stat-num" id="cc">&mdash;</div><div class="hero-stat-label">CATEGORIES</div></div>
<div><div class="hero-stat-num">&yen;500ã€œ</div><div class="hero-stat-label">FROM</div></div>
</div>
<div class="scroll-indicator"><span>SCROLL</span><div class="scroll-line"></div></div>
</section>

<section id="recommend">
<div class="section-header"><div class="section-label">Staff Picks</div><div class="section-title">ä»Šæ—¥ã®ãŠã™ã™ã‚</div></div>
<div style="padding:.5rem 0"><div class="h-track recommend-track" id="recTrack"></div></div>
<div class="scroll-arrows">
<button class="scroll-arrow" onclick="sEl('recTrack',-280)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M15 18l-6-6 6-6"/></svg></button>
<button class="scroll-arrow" onclick="sEl('recTrack',280)"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 18l6-6-6-6"/></svg></button>
</div>
</section>

<section class="menu-section" id="menu">
<div class="section-header"><div class="section-label">Full Collection</div><div class="section-title">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</div></div>
<div class="main-tabs" id="mTabs"></div>
<div class="sub-wrap" id="sWrap" style="display:none"><div class="sub-tabs" id="sTabs"></div></div>
<div id="mContent"></div>
</section>

<section class="store-section" id="access">
<div class="store-inner">
<div class="store-info-area">
<h2>LIQUOR MUSEUM</h2>
<div class="store-name-jp">ãŠé…’ã®ç¾è¡“é¤¨ã€€è±Šæ©‹é§…å‰åº—</div>
<div class="sd"><svg class="si" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg><div><div class="sd-label">Address</div><div class="sd-val">æ„›çŸ¥çœŒè±Šæ©‹å¸‚å¤§æ©‹é€š1ä¸ç›®88-2</div></div></div>
<div class="sd"><svg class="si" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg><div><div class="sd-label">Tel</div><div class="sd-val"><a href="tel:07016795951">070-1679-5951</a></div></div></div>
<div class="sd"><svg class="si" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><div><div class="sd-label">Hours</div><div class="sd-val">17:00 ã€œ 24:00</div></div></div>
<div class="sd"><svg class="si" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><div><div class="sd-label">Closed</div><div class="sd-val">æ—¥æ›œæ—¥</div></div></div>
<div class="sd"><svg class="si" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg><div><div class="sd-label">Instagram</div><div class="sd-val"><a href="https://www.instagram.com/lm.toyohashi.aichi.bar/" target="_blank" rel="noopener">@lm.toyohashi.aichi.bar</a></div></div></div>
</div>
<div class="store-map"><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3271.8!2d137.389!3d34.765!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x601879a9d78b2e9d%3A0x0!2z44GK6YWS44Gu576O6KGT6aSoIOixiuapi-mnheWJjeW6lw!5e0!3m2!1sja!2sjp" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe></div>
</div>
<div class="footer-bottom">
<div class="footer-copy">&copy; 2025 ãŠé…’ã®ç¾è¡“é¤¨ è±Šæ©‹é§…å‰åº—</div>
<div class="footer-link"><a href="https://maps.app.goo.gl/SePY2myY3iRwgtYYA" target="_blank" rel="noopener">Google Maps &rarr;</a></div>
</div>
</section>

<button class="btt" id="btt" onclick="window.scrollTo({top:0,behavior:'smooth'})"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M18 15l-6-6-6 6"/></svg></button>

<script>
/*
  bottle.csv å½¢å¼:
  ID,å•†å“å1,å•†å“å2,ä¾¡æ ¼,ã‚«ãƒ†ã‚´ãƒª,ãŠã™ã™ã‚,åœ¨åº«
  1,ã‚°ãƒ¬ãƒ³ã‚¢ãƒ©ãƒ’ãƒ¼,12å¹´,1500,ã‚¹ã‚³ãƒƒãƒãƒ»ã‚¹ãƒšã‚¤ã‚µã‚¤ãƒ‰,0,1
  ç”»åƒ: bottleimages/{ID}.png
  åœ¨åº«0 â†’ éè¡¨ç¤º / ãŠã™ã™ã‚1 â†’ ä»Šæ—¥ã®ãŠã™ã™ã‚ã«è¡¨ç¤º
  ã‚½ãƒ¼ãƒˆ: å•†å“å1ã®åå‰é † â†’ åŒåã¯å•†å“å2ã®å¹´æ•°é †
*/

var CSV_PATH='bottle.csv';
var MAIN=["ã™ã¹ã¦","ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼","ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼","ãƒ¯ã‚¤ãƒ³","ã‚¹ãƒ”ãƒªãƒƒãƒ„","ãƒªã‚­ãƒ¥ãƒ¼ãƒ«","ç„¼é…"];
var W_SUBS=["ã‚¹ã‚³ãƒƒãƒãƒ»ã‚¢ã‚¤ãƒ©","ã‚¹ã‚³ãƒƒãƒãƒ»ã‚¢ã‚¤ãƒ©ãƒ³ã‚º","ã‚¹ã‚³ãƒƒãƒãƒ»ã‚¹ãƒšã‚¤ã‚µã‚¤ãƒ‰","ã‚¹ã‚³ãƒƒãƒãƒ»ãƒã‚¤ãƒ©ãƒ³ãƒ‰","ã‚¹ã‚³ãƒƒãƒãƒ»ã‚­ãƒ£ãƒ³ãƒ™ãƒ«ã‚¿ã‚¦ãƒ³","ã‚¹ã‚³ãƒƒãƒãƒ»ãƒ­ãƒ¼ãƒ©ãƒ³ãƒ‰","ã‚¹ã‚³ãƒƒãƒãƒ»ãƒ–ãƒ¬ãƒ³ãƒ‡ãƒƒãƒ‰","ã‚¢ã‚¤ãƒªãƒƒã‚·ãƒ¥","ã‚¢ãƒ¡ãƒªã‚«ãƒ³ãƒ»ãƒãƒ¼ãƒœãƒ³","ã‚¢ãƒ¡ãƒªã‚«ãƒ³ãƒ»ãƒ†ãƒã‚·ãƒ¼","ã‚¢ãƒ¡ãƒªã‚«ãƒ³ãƒ»ãƒ©ã‚¤","ã‚«ãƒŠãƒ‡ã‚£ã‚¢ãƒ³","ã‚¸ãƒ£ãƒ‘ãƒ‹ãƒ¼ã‚º","ãã®ä»–ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼"];
var S_SUBS=["ã‚¸ãƒ³","ã‚¦ã‚©ãƒƒã‚«","ãƒ©ãƒ ","ãƒ†ã‚­ãƒ¼ãƒ©"];
var ALL_SO=[].concat(W_SUBS,["ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼","ãƒ¯ã‚¤ãƒ³"],S_SUBS,["ãƒªã‚­ãƒ¥ãƒ¼ãƒ«","ç„¼é…"]);
var D=[],aM="ã™ã¹ã¦",aS=null;

function parseCSV(t){
  var L=t.replace(/\r\n/g,'\n').replace(/\r/g,'\n').split('\n');
  if(L.length<2)return[];
  if(L[0].charCodeAt(0)===0xFEFF)L[0]=L[0].slice(1);
  var H=pL(L[0]),R=[];
  for(var i=1;i<L.length;i++){if(!L[i].trim())continue;var v=pL(L[i]),o={};H.forEach(function(h,j){o[h.trim()]=(v[j]||'').trim()});R.push(o)}
  return R;
}
function pL(l){var r=[],c='',q=false;for(var i=0;i<l.length;i++){var ch=l[i];if(ch==='"')q=!q;else if(ch===','&&!q){r.push(c);c=''}else c+=ch}r.push(c);return r}
function fmtPrice(n){return '\u00a5'+Number(n).toLocaleString()}

/* Sort: name1 alphabetically, then name2 by extracted number */
function sortItems(arr){
  return arr.sort(function(a,b){
    if(a.name1<b.name1)return -1;
    if(a.name1>b.name1)return 1;
    return a.priceNum-b.priceNum;
  });
}

async function loadData(){
  try{
    var res=await fetch(CSV_PATH+'?t='+Date.now());
    if(!res.ok)throw new Error('HTTP '+res.status);
    var text=await res.text();
    var rows=parseCSV(text);
    D=[];
    rows.forEach(function(r){
      var id=parseInt(r['ID']||'0',10);
      var name1=r['å•†å“å1']||'';
      var name2=r['å•†å“å2']||'';
      var priceNum=parseInt((r['ä¾¡æ ¼']||'0').replace(/[Â¥,\s]/g,''),10)||0;
      var cat=r['ã‚«ãƒ†ã‚´ãƒª']||'';
      var rec=(r['ãŠã™ã™ã‚']||'0').trim();
      var stock=parseInt(r['åœ¨åº«']||'0',10);
      if(!name1||!priceNum||stock===0)return;
      D.push({id:id,name1:name1,name2:name2,price:fmtPrice(priceNum),priceNum:priceNum,sub:cat,rec:rec==='1'});
    });
    sortItems(D);
    init();
  }catch(e){
    console.error('CSV load error:',e);
    document.getElementById('mContent').innerHTML='<div class="no-res">bottle.csv ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚<br><small>GitHub Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€index.html ã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã« bottle.csv ã‚’é…ç½®ã—ã¦ãã ã•ã„ã€‚</small></div>';
    document.getElementById('loader').classList.add('hidden');
  }
}

function mc(i){
  if(W_SUBS.indexOf(i.sub)>=0)return"ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼";
  if(S_SUBS.indexOf(i.sub)>=0)return"ã‚¹ãƒ”ãƒªãƒƒãƒ„";
  if(i.sub==="ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼")return"ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼";
  if(i.sub==="ãƒ¯ã‚¤ãƒ³")return"ãƒ¯ã‚¤ãƒ³";
  if(i.sub==="ç„¼é…")return"ç„¼é…";
  return"ãƒªã‚­ãƒ¥ãƒ¼ãƒ«";
}
function sEl(id,px){document.getElementById(id).scrollBy({left:px,behavior:'smooth'})}
function renderRec(){
  var t=document.getElementById('recTrack');
  var items=D.filter(function(i){return i.rec});
  items.sort(function(a,b){return a.priceNum-b.priceNum});
  var sec=t.closest('section');
  if(!items.length){sec.style.display='none';return}
  sec.style.display='';
  t.innerHTML=items.map(function(item,idx){
    var n2=item.name2?'<div class="card-name2">'+item.name2+'</div>':'<div class="card-name2"></div>';
    return '<div class="recommend-card"><div class="card-image"><img src="bottleimages/'+item.id+'.png" alt="'+item.name1+'" onerror="this.parentElement.innerHTML=\'<div class=ph>'+(idx+1)+'</div>\'"><div class="card-badge">PICK</div></div><div class="card-info"><div class="card-cat">'+item.sub+'</div><div class="card-name1">'+item.name1+'</div>'+n2+'<div class="card-price">'+item.price+'<small>ï¼ˆç¨è¾¼ï¼‰</small></div></div></div>';
  }).join('');
}

function renderMT(){document.getElementById('mTabs').innerHTML=MAIN.map(function(c){return '<button class="main-tab'+(aM===c?' active':'')+'" onclick="setM(\''+c+'\')">'+c+'</button>'}).join('')}
function setM(c){aM=c;aS=null;renderMT();renderST();renderC()}

function renderST(){
  var w=document.getElementById('sWrap'),el=document.getElementById('sTabs');
  var subs=aM==="ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼"?W_SUBS:aM==="ã‚¹ãƒ”ãƒªãƒƒãƒ„"?S_SUBS:[];
  if(!subs.length){w.style.display='none';return}
  w.style.display='block';
  var f=subs.filter(function(s){return D.some(function(i){return i.sub===s})});
  el.innerHTML='<button class="sub-tab'+(aS===null?' active':'')+'" onclick="setSub(null)">ã™ã¹ã¦</button>'+f.map(function(s){
    var label=s.replace('ã‚¹ã‚³ãƒƒãƒãƒ»','').replace('ã‚¢ãƒ¡ãƒªã‚«ãƒ³ãƒ»','');
    return '<button class="sub-tab'+(aS===s?' active':'')+'" onclick="setSub(\''+s+'\')">'+label+'</button>';
  }).join('');
}
function setSub(s){aS=s;renderST();renderC()}

function renderC(){
  var ct=document.getElementById('mContent');
  var items=aM==="ã™ã¹ã¦"?D.slice():D.filter(function(i){return mc(i)===aM});
  if(aS)items=items.filter(function(i){return i.sub===aS});
  var subOrder;
  if(aM==="ã™ã¹ã¦")subOrder=ALL_SO;
  else if(aM==="ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼")subOrder=aS?[aS]:W_SUBS;
  else if(aM==="ã‚¹ãƒ”ãƒªãƒƒãƒ„")subOrder=aS?[aS]:S_SUBS;
  else if(aM==="ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼")subOrder=["ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼"];
  else if(aM==="ãƒ¯ã‚¤ãƒ³")subOrder=["ãƒ¯ã‚¤ãƒ³"];
  else if(aM==="ç„¼é…")subOrder=["ç„¼é…"];
  else subOrder=["ãƒªã‚­ãƒ¥ãƒ¼ãƒ«"];

  var h='';
  subOrder.forEach(function(sub){
    var si=items.filter(function(i){return i.sub===sub});
    if(!si.length)return;
    var tid='t_'+sub.replace(/[ãƒ»\s]/g,'_');
    h+='<div class="cat-row"><div class="cat-row-hd"><h3>'+sub+'</h3><span class="cc">'+si.length+'</span><div class="cl"></div></div><div class="h-track" id="'+tid+'">'+si.map(function(i){return ri(i)}).join('')+'</div></div>';
  });
  ct.innerHTML=h||'<div class="no-res">è©²å½“ã™ã‚‹ãŠé…’ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>';
}

function ri(item){
  var n2=item.name2?'<div class="mi-name2">'+item.name2+'</div>':'<div class="mi-name2"></div>';
  return '<div class="mi"><div class="mi-img"><img src="bottleimages/'+item.id+'.png" alt="'+item.name1+'" loading="lazy" onerror="this.parentElement.innerHTML=\'<div class=phs>ğŸ¥ƒ</div>\'"></div><div class="mi-cat">'+item.sub+'</div><div class="mi-names"><div class="mi-name1">'+item.name1+'</div>'+n2+'</div><div class="mi-price">'+item.price+'</div></div>';
}

function init(){
  var subs=[];D.forEach(function(i){if(subs.indexOf(i.sub)<0)subs.push(i.sub)});
  document.getElementById('tc').textContent=D.length;
  document.getElementById('cc').textContent=subs.length;
  renderRec();renderMT();renderST();renderC();
  setTimeout(function(){document.getElementById('loader').classList.add('hidden')},400);
}

window.addEventListener('scroll',function(){document.getElementById('btt').classList.toggle('visible',window.scrollY>500)});
window.addEventListener('DOMContentLoaded',loadData);
</script>
</body>
</html>
